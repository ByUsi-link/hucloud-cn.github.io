# BySi帮助文档
# `data.json` 自定义节点和玩家功能详细说明文档

`data.json` 是游戏剧情和角色设定的核心文件，提供了极高的灵活性，允许开发者通过自定义节点来定义游戏中的场景、选择项和角色发展。以下文档将详细解释如何编写并使用 `data.json`，从而实现复杂的游戏剧情。
> 特别声明，该游戏核心暂未上线，在官方群里可以提前下载超前体验

---

## 1. 文件结构概览

`data.json` 文件的核心分为以下几个部分：

1. **节点（Nodes）**：定义游戏中的剧情和场景。
2. **玩家设置（Player Settings）**：定义玩家的基本信息。
3. **角色定义（Characters）**：定义游戏中的角色及其背景故事。

---

## 2. 自定义节点（Nodes）

每个节点（Node）代表游戏中的一个独立场景或事件，节点中可以包含文本描述和玩家可选择的操作。节点使用 `text` 字段描述场景，使用 `choices` 字段定义玩家可以选择的行动。

### 节点结构

每个节点的基本结构如下：

- **text**：场景描述，类型为 `string`。它是玩家在该节点看到的内容。
- **choices**：选择项，类型为 `object`。其中包含多个键值对，键是选择项的文本，值是跳转的目标节点。

### 示例节点

```json
"start_game": {
    "speaker": "陌生人",
    "text": "你现在站在一个陌生的地方，四周充满神秘气息。你会怎么做？",
    "choices": {
        "探索": "explore",
        "等待": "wait"
    }
}
```

在这个示例中，`start_game` 是节点的名称。玩家在该场景中可以看到 `text` 中描述的场景，并可以选择 "探索" 或 "等待"。选择之后，游戏会跳转到对应的 `explore` 或 `wait` 节点。

### 动态剧情发展

节点不仅仅是静态的剧情展示，它们可以通过选择项动态决定剧情的走向。每个选择会对应一个不同的节点，这样可以使玩家的每个选择都对剧情产生实际的影响。节点之间可以无限制地互相链接，从而形成一个复杂的剧情树。

### 多层嵌套选择

如果剧情需要更复杂的选择链，可以在每个节点中嵌套更多的选择。例如，玩家进入某个房间后，还可以选择与 NPC 互动或者继续探索。

```json
"room_entry": {
    "speaker": "陌生人",
    "text": "你走进了一个神秘的房间，发现了一本古老的书和一位老者坐在角落。",
    "choices": {
        "与老者交谈": "talk_to_old_man",
        "翻阅古书": "read_book",
        "离开房间": "leave_room"
    }
}
```

### 无选择项的场景

如果某个节点不包含 `choices`，表示该场景没有玩家可选的操作，可能是剧情结束或者强制的转场。例如，某些结局场景。

```json
"game_over": {
    "text": "游戏结束！你没有逃出这个神秘的房子。"
}
```

## 3. 玩家设置（Player Settings）

玩家设置部分用来定义游戏中的玩家信息。这个部分通常包括玩家的名称，但可以根据需求扩展，例如性别、年龄等。该部分可以在游戏启动时为玩家提供自定义选项，并通过不同的属性来影响剧情。

### 玩家设置结构

```json
"player": {
    "name": "玩家",
    "attributes": {
        "性别": "未知",
        "职业": "冒险者"
    }
}
```

- **name**：定义玩家的名称。该名称可以动态显示在游戏的各个场景中，以提供个性化体验。
- **attributes**：这是一个可选的扩展字段，用来定义玩家的额外信息，例如性别、职业、年龄等。这些属性可以在剧情节点中被引用，从而实现更加丰富的互动体验。

### 动态玩家属性

玩家的属性可以影响游戏中的选择。例如，根据玩家的职业，可能会开启或关闭某些选项。以下是一个示例：

```json
"start_game": {
    "speaker": "陌生人",
    "text": "作为一名{player.attributes.职业}，你在荒野中孤身探索。",
    "choices": {
        "继续前行": "move_forward",
        "设立营地": "set_camp"
    }
}
```

在这个场景中，玩家的职业会动态替换到场景文本中。假设玩家是“冒险者”，那么 `text` 的显示效果会变成：“作为一名冒险者，你在荒野中孤身探索。”

## 4. 角色定义（Characters）

`characters` 部分定义了游戏中所有非玩家角色（NPC），并为每个角色提供详细的背景描述。这些角色的行为和对话将会在游戏中与玩家互动，影响剧情走向。

### 角色定义结构

```json
"characters": {
    "liu_ruyan": {
        "description": "柳如烟，一位温柔的教师，她对生活充满了希望。"
    },
    "ji_boda": {
        "description": "继博达，一位冷静的企业家，外表坚强但内心柔软。"
    }
}
```

- **description**：每个角色的详细背景描述，类型为 `string`。描述可以包含角色的外貌、性格、动机等。

### 角色互动

角色的定义不仅仅是静态的信息，它们可以动态参与剧情节点。例如，玩家在与某个角色互动时，可以引用该角色的描述或行为。

```json
"meet_liu_ruyan": {
    "speaker": "陌生人",
    "text": "你遇到了柳如烟。她看上去有些疲惫，但依然微笑着问候你。",
    "choices": {
        "向她问好": "greet_liu_ruyan",
        "忽视她": "ignore_liu_ruyan"
    }
}
```

通过这种方式，角色的个性和行为可以丰富游戏的互动体验。

## 5. 扩展自定义功能

为了提高游戏的灵活性，`data.json` 支持多种自定义扩展功能。开发者可以根据需求添加更多字段来扩展游戏逻辑。

### 支持多达2048个角色

为了支持更复杂的游戏设定，`data.json` 文件允许定义多达 **2048 个角色**。每个角色都可以有自己独立的背景故事和行为，这使得大型游戏中的角色互动和复杂剧情成为可能。

### 节点间的复杂选择逻辑

除了简单的“选择-跳转”机制，开发者还可以为选择项添加更多逻辑。例如，根据玩家的某个属性值，来决定某个选择是否可用。以下是一个示例：

```json
"cross_bridge": {
    "speaker": "陌生人",
    "text": "你来到了一座破旧的桥前。你有勇气尝试过桥吗？",
    "choices": {
        "尝试过桥": {
            "next_node": "fall_bridge",
            "condition": "player.attributes.勇气 > 5"
        },
        "转身离开": "return_forest"
    }
}
```

在这个场景中，只有当玩家的“勇气”值大于 5 时，才可以选择“尝试过桥”。这种条件选择机制允许开发者为游戏增加更多的深度和复杂性。

## 6. `data.json` 的设计原则

- **灵活性**：节点和选择项的设计应尽量保持灵活，支持多种不同类型的游戏玩法。
- **可扩展性**：角色定义和玩家属性可以根据游戏需求任意扩展，不局限于基础的名称和描述。
- **可维护性**：保持文件结构清晰简洁，方便开发者维护和更新剧情。
  
通过遵循这些设计原则，开发者可以轻松创建丰富、互动性强且剧情复杂的游戏。

---

## 总结

`data.json` 文件是一个高度灵活的配置文件，通过自定义节点、角色和玩家属性，开发者可以设计出复杂而引人入胜的游戏剧情。多达 2048 个角色和复杂的选择逻辑使得大型、互动性强的游戏成为可能。